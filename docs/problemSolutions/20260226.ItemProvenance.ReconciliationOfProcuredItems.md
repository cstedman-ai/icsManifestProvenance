# 20260226 — Item Provenance — Reconciliation of Procured Items

> **Sources:**
> - `docs/from.Cor/Feb26.Writings.Notes.ItemProvenanceAndSolutions`
> - `docs/from.ICS/Feb26.Problem.LiamJones.CurrentProvenanceAndReconciliationOfProcuredItems`
> - `docs/from.ICS/Feb26.Problem.FrankDarrigo.CurrentProvenanceAndReconciliationOfProcuredItems`
> - `docs/rules/20260226.VendorPortal.ImplementationPlan.md`

---

## 1. The Problem

### 1.1 Summary

The process of receiving vendor shipments, verifying their contents against purchase orders, and producing compliant documentation is almost entirely manual. Physical packing lists are the single source of truth, and they are fragile, losable, and difficult to digitize. When they fail — and they frequently do — the entire receiving and reconciliation chain stalls.

### 1.2 Problem Dimensions

The problems reported by the ICS team fall into three categories:

#### A. Document Fragility & Loss

| What happens | Impact |
|---|---|
| Vendor forgets to include the packing list | Escalation through the global supply manager to track it down; receiving halted |
| Packing list is physically damaged in transit | Same escalation path; same delay |
| Packing list is lost during receiving (40+ pallets, multiple trucks, warehouse staging) | No proof of what was delivered; manual recount required |

*— Liam Jones*

#### B. Manual Process Overhead

| Step | Pain |
|---|---|
| Packing list arrives as 10+ printed pages | Too large to scan/upload in one pass |
| Staff must print, sign, date, scan, upload | Every step is a point of failure; consumed time for every delivery |
| Matching what was ordered vs. what arrived is done by hand | Slow, error-prone, does not scale across hundreds of POs |

*— Liam Jones, Frank D'Arrigo*

#### C. Compliance & Auditability Risk

| Requirement | Gap |
|---|---|
| SOX compliance requires timestamped, signed proof of receipt | The paper-based workflow produces unreliable records |
| Quantity sent vs. quantity received must be reconcilable | Currently depends on a physical document surviving the entire chain |
| Individual serial/model verification per device | No structured digital capture; done ad-hoc on paper |

*— Liam Jones, Frank D'Arrigo*

### 1.3 Root Cause

There is no shared digital system between ICS and its vendors. The packing list exists only as a physical artifact that must survive from the vendor's shipping dock → carrier → ICS warehouse → scanning room → upload system. Every handoff is a potential point of loss, damage, or human error. The data on the packing list is never structured — it's ink on paper — so even when it survives intact, converting it into actionable, auditable records requires manual labor.

---

## 2. The Solution

### 2.1 Core Concept

Replace the physical packing list with a **digital manifest** that the vendor creates inside a web-based portal before the shipment leaves their facility. The manifest becomes the single source of truth, accessible to anyone with the right credentials, at any time, from anywhere. When the shipment arrives, ICS staff verify against the digital record — not a piece of paper.

### 2.2 How It Works (End to End)

```
VENDOR SIDE                              ICS / COREWEAVE SIDE
───────────                              ────────────────────

1. Vendor logs in                        1. ICS creates PO in the system
   (selects company → credentials)          (items, quantities, serials, SKUs)
           │                                        │
           ▼                                        ▼
2. Sees only their POs                   2. PO is visible to the assigned vendor
   (filtered by vendor identity)
           │
           ▼
3. Selects PO(s) for this shipment
           │
           ▼
4. Enters shipment details
   • Carrier / tracking number
   • Domestic or International
   • Registers pallets (if multi-pallet)
           │
           ▼
5. Confirms line items
   • SKU (locked from PO)
   • MPN
   • Quantity shipping
   • Serial numbers (one per unit)
   • Pallet assignment
           │
           ▼
6. Enters packed dimensions & weight
   per carton / crate / pallet
           │
           ▼
7. Reviews everything on one screen
   • System validates completeness
   • Blocks submit if data is missing
           │
           ▼
8. Submits → system generates:           3. ICS receives the shipment
   • Digital packing slip                   • Opens the PO in the system
   • Digital packing list                   • Sees what should be on the truck
   • QR codes per pallet (serials inside)   • Scans QR code to pull manifest
   • Barcode labels per serial              • Records qty received per item
   • Commercial invoice (if intl)           • System flags discrepancies
           │                                        │
           ▼                                        ▼
9. Vendor prints labels,                 4. Reconciliation screen shows:
   attaches to shipment                     • Expected vs. received
                                            • Missing serials
                                            • Quantity deltas
                                            • Timestamped, signed record
                                              → SOX compliant
```

### 2.3 What This Solves

Each problem from Section 1 maps directly to a solution capability:

| Problem | Solution | Where in the app |
|---|---|---|
| **Packing list missing** | Vendor creates the manifest digitally *before* shipping; it's in the system before the truck leaves | Vendor Portal → Shipment Wizard |
| **Packing list damaged** | The manifest is digital data, not paper; immune to physical damage | Stored in app state / localStorage (and ultimately a backend) |
| **Packing list lost in warehouse** | Accessible from any device with a login; lives inside the procurement record | PO Detail page, Receiving page |
| **10+ pages too large to scan** | No scanning needed; data is born digital | Vendor Portal submission |
| **Print/sign/date/scan/upload cycle** | Replaced by vendor clicking "Submit" and ICS clicking "Confirm Received" with a digital signature timestamp | Shipment Wizard → Receiving page |
| **Manual matching of ordered vs. received** | System auto-compares and highlights discrepancies (quantity deltas, missing serials) | Reconciliation page |
| **SOX compliance gaps** | Every action is timestamped with user identity; immutable after submission | Audit trail built into data model |
| **No serial-level tracking** | Serials are entered per item by the vendor and verified at receiving; system flags mismatches | Line Item Entry → Receiving → Reconciliation |
| **No structured data for downstream systems** | All data is JSON; exportable; ready for database import | Data Management page (export as JSON) |

### 2.4 Item Tracking: Serialized vs. Quantity-Based

Per the original project notes, not all items are serialized:

| Item type | Tracking method | Examples |
|---|---|---|
| **Racked devices** | By serial number — each unit gets a unique serial | Servers, GPUs, switches |
| **Consumables / accessories** | By type and quantity — no individual serials | Cables, rails, power cords |

The vendor portal handles both: serialized items require serial entry matching the quantity shipped; non-serialized items require only a quantity.

### 2.5 QR Codes as the Physical Bridge

Even though the manifest is digital, physical shipments still need a scannable identifier so warehouse staff can instantly pull up the right record. The system generates:

- **Pallet-level QR codes** — encode Pallet ID, PO Number, SKU, MPN, quantity, and all serials on that pallet. Printed and attached to two sides of the pallet. Receiving staff scan the QR to auto-populate the receiving form.
- **Unit-level barcode labels** — Code 128 encoding each serial number. For individual device tracking and inventory intake.

This satisfies CoreWeave's pallet identification and labeling requirements while giving ICS a one-scan receiving workflow.

---

## 3. What We Are Building

### 3.1 Application: ICS Supreme — Purchase Reconciliation Platform

A React web application with two portals behind a shared login:

| Portal | Users | Capabilities |
|---|---|---|
| **Coreweave** | ICS internal staff | Create POs, view all POs, receive shipments, reconcile, manage data |
| **Vendor** | Dell, SuperMicro, NVIDIA, Opengear | View their POs, create shipment manifests, generate labels and documents |

### 3.2 Key Workflows Implemented

1. **PO Creation** (Coreweave side) — Already built.
2. **Vendor Shipment Wizard** (Vendor side) — Multi-step form: select POs → shipment info → line items with serials → packed dimensions → review & submit. Replaces the paper packing list entirely.
3. **Receiving** (Coreweave side) — Already built. Will consume the digital manifest for comparison.
4. **Reconciliation** (Coreweave side) — Already built. Auto-generates expected-vs-received reports with discrepancy highlighting.
5. **Document Generation** (Vendor side) — System produces packing slips, packing lists, QR labels, barcode labels, and commercial invoices as downloadable/printable PDFs.

### 3.3 Implementation Phases

The full build plan is defined in `docs/rules/20260226.VendorPortal.ImplementationPlan.md`. In summary:

| Phase | Scope | Status |
|---|---|---|
| 0 | Install dependencies (`react-barcode`, `jspdf`, `jspdf-autotable`) | Pending |
| 1 | Extend data model for multi-PO shipments, pallets, packed dimensions, commercial invoices | Pending |
| 2 | Vendor-scoped PO filtering (vendors see only their own POs) | Pending |
| 3 | Multi-step shipment wizard (5 screens replacing the single-form portal) | Pending |
| 4 | Post-submission outputs (QR codes, barcodes, PDF generation) | Pending |
| 5 | Commercial invoice for international shipments | Pending |
| 6 | Validation hardening and edge cases | Pending |
| 7 | UX polish (step indicators, help text, mobile support) | Pending |

---

## 4. Success Criteria

When fully implemented, the following must be true:

1. **Zero paper packing lists required** — The vendor submits everything digitally; the physical packing list becomes optional backup, not the primary record.
2. **One-scan receiving** — Warehouse staff scan a QR code on the pallet and the system pre-fills the receiving form with expected items, quantities, and serials.
3. **Automatic discrepancy detection** — Any mismatch between what was shipped and what was received is flagged immediately, with specific item-level detail.
4. **SOX-ready audit trail** — Every submission and confirmation is timestamped with user identity. Records are immutable post-submission.
5. **Accessible anywhere** — The manifest lives in the application, not on a piece of paper. Any authorized user can view it from any device at any time.
6. **Vendor compliance** — The shipment wizard enforces CoreWeave's packing slip, packing list, pallet labeling, and commercial invoice requirements by design. Non-compliant submissions are blocked by the validation gate.
